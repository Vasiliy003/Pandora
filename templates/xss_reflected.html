<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Поиск — Тестовая страница (reflected XSS)</title>
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --accent:#3b82f6;
      --muted:#6b7280;
      --danger:#ef4444;
      --radius:12px;
      --maxw:900px;
      --gap:16px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    body{
      background: linear-gradient(180deg, var(--bg), #eef2ff);
      padding: 48px 16px;
      display:flex;
      justify-content:center;
    }
    .container{
      width:100%;
      max-width:var(--maxw);
      display:grid;
      gap:var(--gap);
      align-items:start;
    }
    .card{
      background:var(--card);
      border-radius:var(--radius);
      box-shadow: 0 6px 18px rgba(15,23,42,0.06);
      padding:20px;
    }
    form .row{ margin-bottom:12px; }
    label{ display:block; font-size:13px; color:var(--muted); margin-bottom:6px;}
    input[type="text"] {
      width:100%; padding:10px 12px; border-radius:8px; border:1px solid #e6e9f0;
      font-size:14px; background: #fbfcff;
      box-sizing:border-box;
    }
    .btn{
      display:inline-block; padding:10px 14px; border-radius:10px;
      background:var(--accent); color:white; font-weight:600; border:none;
      cursor:pointer; text-decoration:none;
    }
    .result-box{
      margin-top:16px; padding:16px;
      border-radius:10px;
      background:#fbfdff; border:1px solid #eef2ff;
    }
    .danger-note{ color:var(--danger); font-size:13px; margin-top:8px; }
    .timer { margin-left:10px; font-size:14px; color:#374151; }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <h2>Поиск по сайту</h2>
      <form method="post">
        <div class="row">
          <label for="flag">Поле для флага</label>
          <input id="flag" name="flag" type="text" placeholder="Введите полученный флаг">
          <div style="font-size:12px; color:var(--muted); margin-top:6px;">
            {{ task }} Вам нужно найти значение скрытого инпута secret
          </div>
        </div>

        <div class="row" style="display:flex; align-items:center; gap:10px;">
          <button type="submit" class="btn">Проверить</button>
          <div class="timer">⏱ Осталось: <span id="timer">00:00</span></div>
          <input type="hidden" name="time" value="{{ start_time }}">
        </div>
      </form>

      <hr style="margin:16px 0; border:none; border-top:1px solid #f1f5f9;">

      <input type="hidden" id="secret" name="secret" value="{{ xss_flag }}">
      <form method="get">
        <div class="row">
          <label for="query">Введите поисковый запрос</label>
          <input id="query" name="query" type="text" placeholder="Найдите секрет..." value="{{ query }}">
        </div>

        <div class="row">
          <button type="submit" class="btn">Искать</button>
        </div>
      </form>

      {% if query %}
      <div class="result-box">
        <h3>Результаты поиска</h3>
        <div><b>Вы искали:</b> {{ query | safe }}</div>
      </div>
      {% endif %}

    </div>
  </div>
  <script src="static/timer.js"></script>
</body>
</html>
